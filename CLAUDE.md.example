# hydro-nutrient-calc — 開發指引

## 專案定位

Hydroponic Nutrient Calculator：水耕養液離子濃度計算工具。
靜態 Web App，純前端，無後端。

## 技術棧

| 項目 | 選擇 |
|------|------|
| 框架 | Astro |
| 語言 | TypeScript |
| 部署 | Cloudflare Pages |
| 測試 | Vitest + Testing Library |
| Lint | Biome |
| 資料庫 | 無（資料 bake 進程式碼） |
| 使用者儲存 | localStorage |

## 語言

- 程式碼與技術文件：英文
- 與使用者對話：正體中文

## Git 慣例

- commit 前讓使用者確認內容
- 不同意圖的變更分開 commit
- Commit 前綴：`feat:` `fix:` `refactor:` `style:` `chore:` `wip:`

## Project Skills（`.claude/commands/`）

- `/test` — 跑測試 + 覆蓋率報告，標記 < 80% 的檔案
- `/quality` — tsc + 測試 + 覆蓋率 + build 全套檢查

## 品質檢查指令

```bash
npx tsc --noEmit   # Type check
npm run lint        # Biome lint
npm test            # 289 tests
npm run build       # Production build + sitemap
```

---

## WIP

Phase 3 部署進行中。Phase 2 開發全部完成（Affiliate 連結跳過）。

### 已完成

- 計算引擎 + 化學品庫 + 5 種預設配方
- Target Solver（NNLS 自動求解）
- i18n（EN / 繁中 / 简中）
- Dark/Light mode、響應式設計
- SEO（OG image、meta tags、sitemap、robots.txt、JSON-LD）
- GA4 + AdSense scaffold（env var 控制）
- GitHub Actions CI
- Biome linter（0 errors, 0 warnings）
- 289 tests, 92% coverage

### 待設定

1. **GA4 Measurement ID**：Cloudflare Pages env `PUBLIC_GA_ID=G-XXXXXXXXXX`
2. **AdSense Publisher ID**：Cloudflare Pages env `PUBLIC_ADSENSE_ID=ca-pub-XXXXXXXXXXXXXXXX`
3. **自訂網域**：目前用 `hydro-nutrient-calc.pages.dev`
